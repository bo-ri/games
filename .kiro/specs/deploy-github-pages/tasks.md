# Implementation Plan

- [x] 1. デプロイ要求の受付と commit 適格性判定を整備する
- [x] 1.1 手動デプロイトリガーで対象 commit を入力できるようにする
  - デプロイ要求が main マージ済み commit に対して任意に行えることを満たす
  - 入力値の欠落や不正な指定を判別できるようにする
  - _Requirements: 1.1_
- [x] 1.2 main 非マージ commit を拒否し理由を記録できるようにする
  - main 祖先判定で不適格な commit を検出する
  - 不適格な理由を残し、後続のデプロイ処理を停止する
  - _Requirements: 1.2, 1.3, 5.2_
- [x] 1.3 GitHub Actions 上でデプロイが実行される状態を整える
  - デプロイが GitHub Actions の実行として記録されることを保証する
  - _Requirements: 1.4_

- [x] 2. 静的成果物の生成と配信パス整合を整備する
- [x] 2.1 SPA の静的成果物一式を生成し公開対象として扱えるようにする
  - 成果物に必要な静的リソースが揃っていることを保証する
  - 生成結果が GitHub Pages 向けの成果物として扱える状態であることを確認する
  - _Requirements: 3.1_
- [x] 2.2 GitHub Pages の配信パスで静的リソースが解決できるようにする
  - SPA の配信パス前提を満たし、公開後の読み込み失敗を防ぐ
  - 失敗が発生した場合に記録できるようにする
  - _Requirements: 3.2, 3.3_
- [x] 2.3 直リンク時にアプリ起動を妨げない成果物構成を整える
  - ルート以外のアクセスでもアプリが起動できる状態を保証する
  - 未定義パス時のアプリ側表示を許容できる構成にする
  - _Requirements: 4.1, 4.2_

- [x] 3. GitHub Pages への公開と更新を実現する
- [x] 3.1 デプロイ成功時に最新成果物を公開できるようにする
  - Pages 公開が成功したことを確認できる状態を作る
  - _Requirements: 2.1_
- [x] 3.2 公開 URL が安定して提供される状態を保証する
  - デプロイ後の公開 URL を利用者が継続して利用できることを確認する
  - _Requirements: 2.2_
- [x] 3.3 新しいデプロイで公開内容が最新成果物へ更新されるようにする
  - 再デプロイ時に最新成果物が反映されることを確認する
  - _Requirements: 2.3_

- [x] 4. デプロイ状態の記録と可観測性を整備する
- [x] 4.1 デプロイ開始時に実行中の状態を記録できるようにする
  - 実行開始時点の状態が追跡できるようにする
  - _Requirements: 5.1_
- [x] 4.2 デプロイ完了時に成否を記録できるようにする
  - 成功・失敗の終端状態を記録できるようにする
  - _Requirements: 5.3_
- [x] 4.3 失敗時の理由を記録できるようにする
  - commit 不適格やビルド失敗などの理由を可視化できるようにする
  - _Requirements: 5.2, 1.3, 3.3_

- [x] 5. 統合動作と受け入れ確認を行う
- [x] 5.1 手動トリガーから Pages 公開までの一連フローを検証する
  - main マージ済み commit で成功パスが通ることを確認する
  - main 非マージ commit で失敗し理由が記録されることを確認する
  - _Requirements: 1.1, 1.2, 1.3, 1.4, 2.1, 2.3, 5.1, 5.2, 5.3_
- [x] 5.2 公開 URL の直リンクとルーティング互換を検証する
  - ルート以外のパスでアプリが起動することを確認する
  - 未定義パスでアプリ側表示が成立することを確認する
  - _Requirements: 2.2, 4.1, 4.2_
- [x] 5.3 静的リソースの配信パス整合を検証する
  - 公開ページ読み込み時に静的リソースが解決できることを確認する
  - _Requirements: 3.2_
